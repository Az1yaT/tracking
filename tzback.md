# Техническое задание для backend на Java

## **Цели**
Создать backend-сервис для управления курьерскими заказами, который будет предоставлять REST API для взаимодействия с Flutter-приложением. Сервис должен поддерживать авторизацию пользователей, управление заказами, генерацию отчетов и предоставление статистики. Все данные пользователей должны храниться в базе данных PostgreSQL.

---

## **Основные функции**

### **1. Авторизация и управление пользователями**
- **Регистрация пользователей**:
  - Роли: Курьер, Бухгалтер, Директор.
- **Авторизация**:
  - Использование JWT (JSON Web Token) для аутентификации.
- **Управление пользователями**:
  - CRUD-операции для пользователей (создание, чтение, обновление, удаление).

---

### **2. Управление заказами**
- **Создание заказов**:
  - Возможность добавления заказов вручную или через загрузку файла (Excel/CSV).
- **Назначение курьеров**:
  - Автоматическое или ручное назначение курьера на заказ.
- **Обновление статуса заказа**:
  - Статусы: "ожидание", "взято", "доставлено".
- **Фильтрация и поиск заказов**:
  - Поиск по дате, курьеру, статусу, номеру заказа.

---

### **3. Отчеты и статистика**
- **Генерация отчетов**:
  - Форматы: Excel, CSV.
  - Фильтры: по дате, курьеру, статусу.
- **Статистика**:
  - Количество доставленных заказов.
  - Суммы за день/неделю/месяц.
  - Активность курьеров.

---

## **Технические требования**

### **1. Технологии**
- **Язык**: Java 17+.
- **Фреймворк**: Spring Boot.
- **База данных**: PostgreSQL.
- **ORM**: Hibernate.
- **API**: RESTful API с использованием Spring Web.
- **Документация API**: Swagger/OpenAPI.

---

### **2. Архитектура**
- **Модуль "Пользователи"**:
  - Таблица `users`:
    - Поля:
      - `id` (UUID, Primary Key)
      - `username` (String, уникальный)
      - `password` (String, хэшированный)
      - `role` (String, ENUM: "courier", "accountant", "director")
      - `created_at` (Timestamp)
      - `updated_at` (Timestamp)
- **Модуль "Заказы"**:
  - Таблица `orders`:
    - Поля:
      - `id` (UUID, Primary Key)
      - `sender_name` (String)
      - `sender_phone` (String)
      - `receiver_name` (String)
      - `receiver_phone` (String)
      - `status` (String, ENUM: "ожидание", "взято", "доставлено")
      - `courier_id` (UUID, Foreign Key на `users.id`)
      - `created_at` (Timestamp)
      - `updated_at` (Timestamp)
- **Модуль "Отчеты"**:
  - Генерация отчетов на основе данных из таблицы `orders`.

---

### **3. Безопасность**
- Использование JWT для аутентификации.
- Роли и права доступа:
  - Курьер: доступ только к своим заказам.
  - Бухгалтер: доступ к загрузке и просмотру заказов.
  - Директор: доступ к статистике и управлению заказами.

---

### **4. Эндпоинты API**

#### **1. Авторизация**
- `POST /auth/login`: Авторизация пользователя.
- `POST /auth/register`: Регистрация нового пользователя.

#### **2. Управление заказами**
- `GET /orders`: Получение списка заказов (с фильтрацией).
- `POST /orders`: Создание нового заказа.
- `PUT /orders/{id}`: Обновление заказа (например, изменение статуса).
- `DELETE /orders/{id}`: Удаление заказа.

#### **3. Отчеты**
- `GET /reports`: Генерация отчета (с фильтрацией по дате, курьеру).

#### **4. Пользователи**
- `GET /users`: Получение списка пользователей.
- `POST /users`: Создание нового пользователя.
- `PUT /users/{id}`: Обновление данных пользователя.
- `DELETE /users/{id}`: Удаление пользователя.

---

### **Следующие шаги**
1. Настроить Spring Boot проект.
2. Создать базу данных PostgreSQL и настроить подключение.
3. Реализовать модули: авторизация, управление заказами, отчеты.
4. Написать тесты для API.